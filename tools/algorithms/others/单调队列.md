给定一个整数序列 $a_1,a_2,\cdots , a_n$ ，不断执行下述步骤，直至结束：

- 步骤1：创建一个队列 $Q$
- 步骤2：找到整数序列的第一个最大值，假设为 $a_k$ ，执行步骤 3
- 步骤3：将 $a_k$ 入队 $Q$ ，若 $a_k$ 不是最后一个元素（即 $k\ne n$ ），对 $a_k$ 右边的序列执行步骤 2

显然，上述步骤完成后，队列 $Q$ 中的元素非严格单调递减。如何求解队列 $Q$ ？

想象一个柱状图，从左至右第 $i$ 个柱子的高度恰好为 $a_i$ ，初始时将每根柱子标为黑色，然后依次将需要入队的柱子标红。

于是我们可以从左至右遍历柱子，遇到红柱则把左边的所有黑柱删去（如何确保被删的是黑柱？左边比当前红柱矮的都是黑柱）。

> 虽然一开始我们并不知道哪些是红柱，但我们可以每遇到一根柱子就把左边的矮柱删除，这样剩下的柱子一定是真正的红柱。

```cpp
stack<int> S;
for (int i = 0; i < n; ++i) {
    while (!S.empty() && a[S.top()] < a[i]) S.pop();
    S.push(i);
}
```
